<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WhyTab</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ccircle cx='16' cy='16' r='14' fill='%234E7A65'/%3E%3C/svg%3E">
  <link rel="stylesheet" href="tabstash.css">
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1 class="logo"><img src="data:image/png;base64,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" alt="WhyTab"></h1>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item active" data-view="all">
          <svg width="15" height="15" viewBox="0 0 15 15" fill="none"><rect x="2" y="2" width="11" height="11" rx="2" stroke="currentColor" stroke-width="1.2" fill="none"/><path d="M2 5.5H13" stroke="currentColor" stroke-width="1.2"/></svg>
          All Tabs
          <span id="nav-all-count" class="nav-count"></span>
        </button>
      </nav>

      <!-- Save open tabs link -->
      <button id="save-tabs-btn" class="sidebar-save-link">
        <svg width="14" height="14" viewBox="0 0 13 13" fill="none"><path d="M6.5 2.5V10.5M2.5 6.5H10.5" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/></svg>
        Save & close tabs
      </button>

      <div class="sidebar-divider"></div>

      <div class="sidebar-main">
        <div id="sidebar-collections" class="sidebar-collections"></div>

        <div class="sidebar-footer">
          <div id="sidebar-system" class="sidebar-system"></div>
          <button id="nav-archived" class="nav-item nav-item-muted nav-item-archived" data-view="archived">
            Archived
          </button>
          <button id="new-collection-btn" class="nav-item nav-item-muted">
            <svg width="15" height="15" viewBox="0 0 15 15" fill="none"><path d="M7.5 3V12M3 7.5H12" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/></svg>
            New collection
          </button>
          <button id="settings-btn" class="nav-item nav-item-muted">
            <svg width="15" height="15" viewBox="0 0 15 15" fill="none"><circle cx="7.5" cy="7.5" r="2" stroke="currentColor" stroke-width="1.1" fill="none"/><path d="M7.5 1.5V3.5M7.5 11.5V13.5M1.5 7.5H3.5M11.5 7.5H13.5M3.3 3.3L4.7 4.7M10.3 10.3L11.7 11.7M11.7 3.3L10.3 4.7M4.7 10.3L3.3 11.7" stroke="currentColor" stroke-width="1.1" stroke-linecap="round"/></svg>
            Settings
          </button>
        </div>
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <header class="main-header">
        <div class="search-bar">
          <svg class="search-icon" width="16" height="16" viewBox="0 0 15 15" fill="none">
            <circle cx="6.5" cy="6.5" r="4.5" stroke="currentColor" stroke-width="1.3"/>
            <line x1="10" y1="10" x2="13.5" y2="13.5" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/>
          </svg>
          <input type="text" id="search" placeholder="Search tabs..." autocomplete="off" spellcheck="false">
          <button id="search-clear-btn" class="search-clear-btn hidden" type="button" aria-label="Clear search">&times;</button>
          <kbd class="search-kbd">/</kbd>
          <div id="search-panel" class="search-panel hidden">
            <div class="search-panel-section">
              <div class="search-panel-title-row">
                <div class="search-panel-title">Recent searches</div>
                <button id="clear-search-history" class="search-history-clear hidden" type="button">Clear search history</button>
              </div>
              <div id="recent-searches" class="recent-searches"></div>
            </div>
          </div>
        </div>
        <div id="view-actions" class="view-actions hidden">
          <button id="collapse-all-btn" class="view-action-btn">Collapse all</button>
          <button id="expand-all-btn" class="view-action-btn">Expand all</button>
          <span id="prune-divider" class="view-actions-divider hidden" aria-hidden="true"></span>
          <button id="prune-mode-btn" class="view-action-btn" type="button">Prune</button>
          <span id="collection-sort-divider" class="view-actions-divider hidden" aria-hidden="true"></span>
          <details id="collection-sort-menu" class="inline-menu sort-menu hidden">
            <summary class="view-action-btn sort-menu-btn" title="Sort collections">
              Sort: <span id="collection-sort-label">Newest</span>
            </summary>
            <div class="inline-menu-panel sort-menu-panel">
              <button class="inline-menu-item collection-sort-item" data-sort="newest" role="menuitemradio">Newest first</button>
              <button class="inline-menu-item collection-sort-item" data-sort="oldest" role="menuitemradio">Oldest first</button>
              <button class="inline-menu-item collection-sort-item" data-sort="az" role="menuitemradio">Alphabetical (A–Z)</button>
              <button class="inline-menu-item collection-sort-item" data-sort="za" role="menuitemradio">Alphabetical (Z–A)</button>
            </div>
          </details>
        </div>
      </header>

      <div id="pin-tip-banner" class="pin-tip-banner hidden" role="status" aria-live="polite">
        <span>Tip: Click the puzzle piece icon in your toolbar and pin WhyTab for one-click access.</span>
        <button id="pin-tip-dismiss" class="pin-tip-dismiss" type="button" aria-label="Dismiss pin tip">&times;</button>
      </div>

      <!-- Filter pill (shown contextually) -->
      <div id="filter-bar" class="filter-bar hidden">
        <span id="filter-pill" class="filter-pill">
          <span id="filter-text"></span>
          <button id="filter-clear" class="filter-clear">&times;</button>
        </span>
      </div>

      <!-- View title -->
      <div class="view-header">
        <h2 id="view-title" class="view-title">All Tabs</h2>
        <span id="view-count" class="view-count"></span>
      </div>

      <div id="prune-tally" class="prune-tally hidden" aria-live="polite">0 archived · 0 deleted</div>

      <!-- Content -->
      <div id="content" class="content">
        <div id="contextual-nudge-banner" class="contextual-nudge-banner hidden" role="status" aria-live="polite">
          <span id="contextual-nudge-text"></span>
          <div class="contextual-nudge-actions">
            <button id="contextual-nudge-try" class="contextual-nudge-try hidden" type="button">Try it</button>
            <button id="contextual-nudge-dismiss" class="contextual-nudge-dismiss" type="button" aria-label="Dismiss nudge">&times;</button>
          </div>
        </div>
        <div id="content-list" class="content-list"></div>
      </div>

      <!-- Empty state -->
      <div id="empty-state" class="empty-state hidden">
        <div class="empty-icon">
          <svg width="32" height="32" viewBox="0 0 40 40" fill="none">
            <rect x="5" y="9" width="30" height="22" rx="3" stroke="currentColor" stroke-width="1.5" fill="none"/>
            <path d="M5 15H35" stroke="currentColor" stroke-width="1.5"/>
            <circle cx="10" cy="12" r="1" fill="currentColor"/>
            <circle cx="14" cy="12" r="1" fill="currentColor"/>
            <circle cx="18" cy="12" r="1" fill="currentColor"/>
          </svg>
        </div>
        <p class="empty-title" id="empty-title">Save your first session</p>
        <p class="empty-desc" id="empty-desc">WhyTab turns your open tabs into saved sessions you can revisit anytime.</p>
        <p class="empty-sub" id="empty-sub">Use the button below or click "Save open tabs" in the sidebar.</p>
        <button class="empty-cta-btn" id="empty-cta-btn">Save your first session</button>
      </div>
    </main>
  </div>

  <button id="help-fab" class="help-fab" type="button" aria-label="Open help panel">?</button>

  <div id="help-overlay" class="help-overlay" aria-hidden="true">
    <button id="help-backdrop" class="help-backdrop" type="button" aria-label="Close help panel"></button>
    <aside id="help-panel" class="help-panel" role="dialog" aria-modal="true" aria-labelledby="help-title">
      <header class="help-panel-header">
        <h3 id="help-title">Help</h3>
        <button id="help-close-btn" class="help-close-btn" type="button" aria-label="Close help panel">&times;</button>
      </header>
      <div class="help-panel-body">
        <section class="help-section">
          <h4>Getting started</h4>
          <p>WhyTab turns your open tabs into saved collections—so you can close your browser without losing your work, research, or reading list.</p>
          <p>Click Save &amp; close tabs in the sidebar to capture everything open in your current window. Your tabs close, a new collection appears in WhyTab, and you can restore any of them whenever you're ready. Open tabs one at a time by clicking them, or restore the whole collection at once using the arrow icon.</p>
          <p>To open WhyTab from anywhere, click the WhyTab icon in your browser toolbar. Press ⌘K to open the command palette for quick access to any action without leaving your keyboard.</p>
        </section>

        <section class="help-section">
          <h4>Collections</h4>
          <p>A collection is a saved group of tabs. Every time you save, WhyTab creates one automatically with a smart title based on what you were doing—"Mostly GitHub—Friday night" or "React, hooks—Feb 13 evening" rather than a bare timestamp.</p>
          <p>You can rename any collection by hovering over it and clicking the edit icon. Click inside the name field to position your cursor or highlight text, press Enter to save, or Escape to cancel. Renaming a collection promotes it to named status, which affects how WhyTab treats it over time.</p>
          <p>Collections are ordered chronologically, newest first.</p>
        </section>

        <section class="help-section">
          <h4>Pinned collections</h4>
          <p>Pin the collections you return to regularly—a reading list, an ongoing project, a set of design references. Pinned collections always sit at the top of the sidebar and the top of the main view, above your chronological stream.</p>
          <p>To pin: hover over a collection and click the bookmark icon, or drag it from the Collections list into the Pinned section in the sidebar. To unpin: click the bookmark icon again, or drag it back out.</p>
        </section>

        <section class="help-section">
          <h4>Named collections</h4>
          <p>The Named view in the sidebar shows only collections you've deliberately named—filtering out auto-generated session captures. It's the "things I actually care about" view. Pinned collections appear here too, since pinned and named aren't mutually exclusive.</p>
        </section>

        <section class="help-section">
          <h4>Archiving</h4>
          <p>Archive a collection to remove it from your main view without deleting it. Archived content stays searchable and can be restored at any time. You can archive individual tabs within a collection too—not just whole collections.</p>
          <p>Auto-archive: unnamed collections that haven't been meaningfully interacted with (no tabs opened, no renaming) for 14 days are automatically archived. Named collections are never auto-archived. You can adjust the threshold or turn this off entirely in Settings.</p>
        </section>

        <section class="help-section">
          <h4>Finding tabs</h4>
          <p>The search bar searches across all tab titles, URLs, and collection names—so you can find something even if you can't remember which collection it's in. Press / to focus the search bar without reaching for the mouse.</p>
        </section>

        <section class="help-section">
          <h4>Prune mode</h4>
          <p>Prune is a focused triage session for clearing out collections you no longer need. Click Prune in the top bar to enter it.</p>
          <p>In prune mode, your collections reorder by staleness—oldest and least-active first. Work through them one at a time: Keep to leave a collection untouched for 7 days, Archive to move it out of view, or Delete to remove it permanently. Each collection shows when it was last active, so you can make quick, confident decisions.</p>
        </section>

        <section class="help-section">
          <h4>Organising</h4>
          <p>Drag and drop—drag collections to reorder them, or drag from the Collections list into the Pinned section in the sidebar to pin. You can also drag from the main content area into the sidebar.</p>
          <p>Collapse &amp; expand—use Collapse all and Expand all in the top bar to control how collections are displayed.</p>
          <p>Sort—if enabled in Settings, a sort control lets you order collections by newest, oldest, or alphabetically. Sort applies to Collections only—Pinned collections maintain your custom order.</p>
        </section>

        <section class="help-section">
          <h4>Keyboard shortcuts</h4>
          <div class="help-shortcut-table" role="table" aria-label="Keyboard shortcuts">
            <div class="help-shortcut-row" role="row"><span class="help-shortcut-pill" role="cell">⌘K</span><span role="cell">Open command palette</span></div>
            <div class="help-shortcut-row" role="row"><span class="help-shortcut-pill" role="cell">⌘S</span><span role="cell">Save &amp; close tabs</span></div>
            <div class="help-shortcut-row" role="row"><span class="help-shortcut-pill" role="cell">⌘E</span><span role="cell">New collection</span></div>
            <div class="help-shortcut-row" role="row"><span class="help-shortcut-pill" role="cell">⌘P</span><span role="cell">Enter/exit prune mode</span></div>
            <div class="help-shortcut-row" role="row"><span class="help-shortcut-pill" role="cell">⌘U</span><span role="cell">Toggle tab URLs</span></div>
            <div class="help-shortcut-row" role="row"><span class="help-shortcut-pill" role="cell">/</span><span role="cell">Focus search bar</span></div>
          </div>
        </section>

        <section class="help-section">
          <h4>Settings</h4>
          <p>Open Settings from the sidebar to configure: auto-archive threshold (default 14 days), Keep duration in prune mode (default 7 days), context-aware auto titles, whether URLs show by default in search results, and import/export your data as JSON. The full keyboard shortcuts reference is also available in Settings.</p>
        </section>
      </div>
    </aside>
  </div>

  <!-- Move modal -->
  <div id="move-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog">
      <div class="modal-header">
        <h3>Move to collection</h3>
        <button class="modal-close" id="move-close-btn">&times;</button>
      </div>
      <div id="move-list" class="modal-body"></div>
    </div>
  </div>

  <!-- Inline input modal -->
  <div id="inline-input-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-backdrop modal-backdrop-soft"></div>
    <div class="modal-dialog modal-compact">
      <div class="inline-input-modal-body">
        <h3 id="inline-input-modal-title">New collection</h3>
        <input id="inline-input-modal-input" class="inline-input-modal-field" type="text" placeholder="Collection name" autocomplete="off" spellcheck="false">
        <div class="inline-input-modal-actions">
          <button id="inline-input-modal-confirm" class="inline-input-modal-confirm">Create</button>
          <button id="inline-input-modal-cancel" class="inline-input-modal-cancel">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings overlay -->
  <div id="settings-overlay" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog modal-wide">
      <div class="modal-header">
        <h3>Settings</h3>
        <button class="modal-close" id="settings-close-btn">&times;</button>
      </div>
      <div class="modal-body settings-body">
        <div class="setting-group">
          <div class="setting-row">
            <div class="setting-info">
              <div class="setting-label">Show item URLs</div>
              <div class="setting-desc">Display each tab URL directly in list rows.</div>
            </div>
            <div class="setting-control setting-control-shortcut">
              <span class="setting-shortcut-badge" aria-hidden="true">⌘ U</span>
              <label class="setting-switch">
                <input id="setting-show-item-urls" type="checkbox">
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>
        <div class="setting-group">
          <div class="setting-row">
            <div class="setting-info">
              <div class="setting-label">Context-aware auto titles</div>
              <div class="setting-desc">Generate collection names from tab context (domains/keywords) instead of only date + time of day.</div>
            </div>
            <label class="setting-switch">
              <input id="setting-contextual-auto-titles" type="checkbox">
              <span class="slider"></span>
            </label>
          </div>
        </div>
        <div class="setting-group">
          <div class="setting-row">
            <div class="setting-info">
              <div class="setting-label">Show sort control</div>
              <div class="setting-desc">Display a sort option in the toolbar to reorder collections.</div>
            </div>
            <label class="setting-switch">
              <input id="setting-show-sort-control" type="checkbox">
              <span class="slider"></span>
            </label>
          </div>
        </div>
        <div class="setting-group">
          <div class="setting-row">
            <div class="setting-info">
              <div class="setting-label">Show URLs in search results</div>
              <div class="setting-desc">Display tab URLs when viewing search results.</div>
            </div>
            <label class="setting-switch">
              <input id="setting-show-urls-in-search" type="checkbox">
              <span class="slider"></span>
            </label>
          </div>
        </div>
        <div class="setting-group">
          <div class="setting-row">
            <div class="setting-info">
              <div class="setting-label">Auto-archive inactive sessions</div>
              <div class="setting-desc">Automatically archive unnamed sessions after inactivity.</div>
            </div>
            <label class="setting-switch">
              <input id="setting-auto-archive-inactive" type="checkbox">
              <span class="slider"></span>
            </label>
          </div>
          <div id="setting-auto-archive-days-row" class="setting-row setting-row-numeric setting-row-child">
            <div class="setting-info">
              <div class="setting-label">Auto-archive after</div>
              <div class="setting-desc">Days of inactivity before unnamed sessions are archived.</div>
            </div>
            <div class="setting-number-wrap">
              <input id="setting-auto-archive-after-days" class="setting-number-input" type="number" min="1" max="90" step="1">
              <span class="setting-number-unit">days</span>
            </div>
          </div>
        </div>
        <div class="setting-group">
          <div class="setting-row setting-row-numeric">
            <div class="setting-info">
              <div class="setting-label">Keep duration</div>
              <div class="setting-desc">Days before kept collections reappear in prune mode.</div>
            </div>
            <div class="setting-number-wrap">
              <input id="setting-keep-duration-days" class="setting-number-input" type="number" min="1" max="30" step="1">
              <span class="setting-number-unit">days</span>
            </div>
          </div>
        </div>
        <div class="setting-group">
          <div class="setting-row">
            <div class="setting-info">
              <div class="setting-label">Data</div>
            </div>
            <div class="setting-action-row">
              <button id="setting-import-btn" class="setting-action-btn">Import JSON</button>
              <button id="setting-export-btn" class="setting-action-btn">Export JSON</button>
            </div>
          </div>
          <div id="setting-import-error" class="setting-inline-message setting-inline-message-error hidden">Invalid file format. Please select a WhyTab export file.</div>
          <div id="setting-import-confirm" class="setting-inline-confirm hidden">
            <p>This will replace all your current data with the imported data. This cannot be undone.</p>
            <div class="setting-inline-confirm-actions">
              <button id="setting-import-cancel-btn" class="setting-action-btn" type="button">Cancel</button>
              <button id="setting-import-confirm-btn" class="setting-action-btn setting-action-btn-confirm" type="button">Import</button>
            </div>
          </div>
          <input id="setting-import-file" type="file" accept=".json" class="hidden" aria-hidden="true">
        </div>
      </div>
    </div>
  </div>

  <!-- Command palette -->
  <div id="command-palette" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog palette-dialog">
      <input type="text" id="palette-input" class="palette-input" placeholder="Type a command..." autocomplete="off" spellcheck="false">
      <div id="palette-results" class="palette-results"></div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast-stack" class="toast-stack" aria-live="polite" aria-atomic="false"></div>

  <script src="../lib/time.js"></script>
  <script src="../lib/activity.js"></script>
  <script src="../lib/storage.js"></script>
  <script src="tabstash.js"></script>
</body>
</html>
