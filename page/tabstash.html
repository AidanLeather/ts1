<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TabStash</title>
  <link rel="stylesheet" href="tabstash.css">
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1 class="logo">TabStash</h1>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item active" data-view="all">
          <svg width="15" height="15" viewBox="0 0 15 15" fill="none"><rect x="2" y="2" width="11" height="11" rx="2" stroke="currentColor" stroke-width="1.2" fill="none"/><path d="M2 5.5H13" stroke="currentColor" stroke-width="1.2"/></svg>
          All Tabs
          <span class="nav-count" id="nav-all-count"></span>
        </button>
      </nav>

      <div class="sidebar-divider"></div>

      <div id="sidebar-collections" class="sidebar-collections"></div>

      <div class="sidebar-footer">
        <button id="new-collection-btn" class="nav-item nav-item-muted">
          <svg width="15" height="15" viewBox="0 0 15 15" fill="none"><path d="M7.5 3V12M3 7.5H12" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/></svg>
          New collection
        </button>
        <button id="settings-btn" class="nav-item nav-item-muted">
          <svg width="15" height="15" viewBox="0 0 15 15" fill="none"><circle cx="7.5" cy="7.5" r="2" stroke="currentColor" stroke-width="1.1" fill="none"/><path d="M7.5 1.5V3.5M7.5 11.5V13.5M1.5 7.5H3.5M11.5 7.5H13.5M3.3 3.3L4.7 4.7M10.3 10.3L11.7 11.7M11.7 3.3L10.3 4.7M4.7 10.3L3.3 11.7" stroke="currentColor" stroke-width="1.1" stroke-linecap="round"/></svg>
          Settings
        </button>
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <header class="main-header">
        <div class="search-bar">
          <svg class="search-icon" width="15" height="15" viewBox="0 0 15 15" fill="none">
            <circle cx="6.5" cy="6.5" r="4.5" stroke="currentColor" stroke-width="1.3"/>
            <line x1="10" y1="10" x2="13.5" y2="13.5" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/>
          </svg>
          <input type="text" id="search" placeholder="Search tabs..." autocomplete="off" spellcheck="false">
          <kbd class="search-kbd">/</kbd>
        </div>
        <button id="save-all-btn" class="header-save-btn">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M7 2V12M2 7H12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
          Save all tabs
        </button>
      </header>

      <!-- Filter pill (shown contextually) -->
      <div id="filter-bar" class="filter-bar hidden">
        <span id="filter-pill" class="filter-pill">
          <span id="filter-text"></span>
          <button id="filter-clear" class="filter-clear">&times;</button>
        </span>
      </div>

      <!-- View title -->
      <div class="view-header">
        <h2 id="view-title" class="view-title">All Tabs</h2>
        <span id="view-count" class="view-count"></span>
      </div>

      <!-- Notes area (shown when a collection with notes is selected) -->
      <div id="notes-area" class="notes-area hidden">
        <textarea id="notes-input" class="notes-input" placeholder="Add notes to this collection..." rows="3"></textarea>
      </div>

      <!-- Content -->
      <div id="content" class="content"></div>

      <!-- Empty state -->
      <div id="empty-state" class="empty-state hidden">
        <div class="empty-icon">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
            <rect x="5" y="9" width="30" height="22" rx="3" stroke="currentColor" stroke-width="1.5" fill="none"/>
            <path d="M5 15H35" stroke="currentColor" stroke-width="1.5"/>
            <circle cx="10" cy="12" r="1" fill="currentColor"/>
            <circle cx="14" cy="12" r="1" fill="currentColor"/>
            <circle cx="18" cy="12" r="1" fill="currentColor"/>
          </svg>
        </div>
        <p class="empty-title" id="empty-title">Save your first tabs</p>
        <p class="empty-sub" id="empty-sub">Click "Save all tabs" or use the toolbar popup.</p>
      </div>
    </main>
  </div>

  <!-- Move modal -->
  <div id="move-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog">
      <div class="modal-header">
        <h3>Move to collection</h3>
        <button class="modal-close" id="move-close-btn">&times;</button>
      </div>
      <div id="move-list" class="modal-body"></div>
    </div>
  </div>

  <!-- Settings overlay -->
  <div id="settings-overlay" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog modal-wide">
      <div class="modal-header">
        <h3>Settings</h3>
        <button class="modal-close" id="settings-close-btn">&times;</button>
      </div>
      <div class="modal-body settings-body">
        <div class="setting-group">
          <div class="setting-row">
            <div class="setting-info">
              <div class="setting-label">Close tabs after saving</div>
              <div class="setting-desc">Automatically close browser tabs when saved to TabStash.</div>
            </div>
            <label class="toggle">
              <input type="checkbox" id="setting-close-tabs" checked>
              <span class="toggle-track"></span>
            </label>
          </div>
          <div class="setting-row">
            <div class="setting-info">
              <div class="setting-label">Archive tabs after</div>
              <div class="setting-desc">Old tabs are dimmed and excluded from duplicate counts.</div>
            </div>
            <select id="setting-archive-days" class="setting-select">
              <option value="7">7 days</option>
              <option value="30">30 days</option>
              <option value="90">90 days</option>
              <option value="0">Never</option>
            </select>
          </div>
          <div class="setting-row">
            <div class="setting-info">
              <div class="setting-label">Show duplicate warnings</div>
            </div>
            <label class="toggle">
              <input type="checkbox" id="setting-show-dupes" checked>
              <span class="toggle-track"></span>
            </label>
          </div>
          <div class="setting-row">
            <div class="setting-info">
              <div class="setting-label">Merge all duplicates</div>
              <div class="setting-desc">Consolidate duplicate URLs into single entries.</div>
            </div>
            <button id="setting-merge-btn" class="setting-action-btn">Merge now</button>
          </div>
        </div>
        <div class="setting-group">
          <div class="setting-row">
            <div class="setting-info">
              <div class="setting-label">Export data</div>
            </div>
            <button id="setting-export-btn" class="setting-action-btn">Export JSON</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Command palette -->
  <div id="command-palette" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog palette-dialog">
      <input type="text" id="palette-input" class="palette-input" placeholder="Type a command..." autocomplete="off" spellcheck="false">
      <div id="palette-results" class="palette-results"></div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast hidden"></div>

  <script src="../lib/storage.js"></script>
  <script src="tabstash.js"></script>
</body>
</html>
